# 트랜잭션

## 트랜잭션이란?

데이터베이스의 상태를 변화시키기 위해서 수행하는 작업의 단위

반드시 질의어 한문장이 작업의 단위가 아니다.

## 트랜잭션의 특징 ACID

### 원자성 (Atomicity)

트랜잭션이 데이터베이스에 모두 반영되던가, 아니면 전혀 반영되지 않아야 한다.

### 일관성(Consistency)

트랜잭션의 작업 처리 결과가 항상 일관성이 있어야 한다.

트랜잭션이 진행되는 동안에 데이터베이스가 변경되더라도 업데이트된 데이트베이스로 트랜잭션이 진행되는 것이 아니라, 처음에 트랜잭션을 진행 하기 위해 참조한 데이터베이스로 진행한다.

### 독립성(Isolation)

둘 이상의 트랜잭션이 동시에 실행되고 있을 경우 어떤 하나의 트랜잭션이라도, 다른 트랜잭션의 연산에 끼어들 수 없다는 점을 가리킨다.

### 지속성(Durability)

트랜잭션이 성공적으로 완료됐을경우 결과는 영구적으로 반영되어야 한다.

## 트랜잭션의 상태

### 활성화(Active)

트랜잭션이 작업을 시작하여 실행 중인 상태

### 실패(Failed)

트랜잭션에 오류가 발생하여 실행이 중단된 상태

### 철회(Aborted)

트랜잭션이 비정상적으로 종료되어 Rollback연산을 수행한 상태

### 부분 완료(Partially commited)

트랜잭션의 마지막 연산까지 실행하고 commit 요청이 들어온 직후의 상태. 최종 결과를 데이터베이스에 아직 반영하지 않은 상태

### 완료(Commited)

트랜잭션이 성공적으로 종료되어 commit 연산을 실행한 후의 상태

## LOCK

**트랜잭션 처리의 순차성을 보장하기 위한 방법**

### 공유(Shared) lock

데이터를 읽을 때 사용되는 lock, 공유 lock은 공유lock끼리는 동시에 접근이 가능하다. 하나의 데이터를 읽는 것은 여러 사용자가 동시에 할 수 있다.

공유 lock이 설정된 데이터에 베타 lock을 사용할 수는 없다.

### 베타(Exclusive) lock

데이터를 변경하고자 할 때 사용되는 lock, 트랜잭션이 완료될 때 까지 유지된다. lock이 해제될 때 까지 다른 트랜잭션은 해당 리소스에 접근할 수 없다.
